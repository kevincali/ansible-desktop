- name: Dependencies
  package:
    name:
      - ShellCheck
      - gcc-c++ 
      - proselint
      - python3-flake8
      - python3-isort
      - python3-lsp-black
      - tree-sitter-cli 

- name: Check if lvim is already installed
  become_user: cake
  command: which lvim
  register: lvim_installed
  ignore_errors: true
  changed_when: false

- name: Not Installed -> Installation
  become_user: cake
  shell: bash <(curl -s https://raw.githubusercontent.com/lunarvim/lunarvim/master/utils/installer/install.sh) --overwrite --no-install-dependencies 
  when: lvim_installed is failed

- name: Installed -> Update
  become_user: cake
  shell: lvim +LvimUpdate +q
  changed_when: false
  when: lvim_installed is succeeded
